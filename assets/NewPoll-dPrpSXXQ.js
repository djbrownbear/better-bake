import{u as z,a as C,j as e}from"./index-D1QAhWgw.js";import{r as s}from"./redux-vendor-D5VNH4HB.js";import{P as I,a as M}from"./PollHeader-DK2dHJsx.js";import{b as A}from"./react-vendor-CtAogoA6.js";import"./fontawesome-Ba4mgrWh.js";import"./helpers-D2giJciC.js";const Y=()=>{const S=z(),g=A(),O=C(t=>t.authedUser),{name:L,avatar:T,allOptions:a}=C(t=>{const r=t.users[t.authedUser||""],i=r?.name||"",o=r?.avatarURL||"";function N(y,k){return Object.entries(y).reduce((p,[P,u])=>P===k?p.concat(y):typeof u=="object"&&u!==null?p.concat(N(u,k)):p,[])}const B=N(t.bakers,"bakeURL");return{name:i,avatar:o,allOptions:B}}),[n,d]=s.useState(""),[c,m]=s.useState(""),[f,x]=s.useState(""),[v,h]=s.useState(""),[l,b]=s.useState(!1),[R,w]=s.useState(!1);s.useEffect(()=>{if(a.length>=2){d(a[0].text),m(a[1].text),x(a[0].bakeURL),h(a[1].bakeURL);const t=document.querySelector("#optionTwoNew");t&&(t.value=a[1].text)}},[a]);const j=t=>{let r=t.target.options.selectedIndex,i=t.target.options[r].dataset.imgurl||"";if(t.target.id==="optionOneNew"){const o=t.target.value;d(o),x(i)}else if(t.target.id==="optionTwoNew"){const o=t.target.value;m(o),h(i)}},U=async t=>{t.preventDefault(),b(!0);try{await S(M({optionOneText:n,optionTwoText:c,optionOneImage:f,optionTwoImage:v})),d(""),m(""),x(""),h(""),w(!0),setTimeout(()=>{w(!1),b(!1),g("/dashboard")},1500)}catch(r){b(!1),console.error("Error creating poll:",r)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 via-white to-gray-50",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-600 via-amber-500 to-amber-600 py-12 shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,transparent,black)]"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-amber-700/20 rounded-full blur-3xl"}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"inline-block px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-full text-sm font-semibold mb-2",children:"âœ¨ Create Content"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white drop-shadow-lg",children:"Create New Poll"}),e.jsx("p",{className:"text-amber-100 text-lg max-w-2xl mx-auto",children:'Design your own "Who Baked It Better" matchup and let the community vote!'})]})})]}),R&&e.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slide-in-right",children:e.jsx("div",{role:"alert","aria-live":"polite",className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 rounded-xl shadow-2xl max-w-md",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:"Poll Created!"}),e.jsx("p",{className:"text-sm text-green-50",children:"Redirecting to dashboard..."})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:e.jsxs("form",{name:"new-poll",className:"max-w-6xl mx-auto",onSubmit:U,children:[e.jsx("div",{className:"mb-8",children:e.jsx(I,{avatar:T,name:L,timestamp:Date.now()})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Baker Matchup"}),e.jsx("p",{className:"text-gray-600",children:"Select two bakes to pit against each other in an epic showdown"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-gray-100 hover:border-amber-300 transition-all hover:shadow-xl",children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-100 to-amber-50 p-6 border-b border-amber-200",children:e.jsxs("label",{htmlFor:"optionOneNew",className:"flex items-center justify-center gap-2 text-xl font-bold text-gray-900",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¥‡"}),"Option One"]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative aspect-square mb-6 bg-gray-50 rounded-xl overflow-hidden group",children:[e.jsx("img",{className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",src:f,alt:`${n}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{name:"optionOneNew",id:"optionOneNew",className:"w-full p-4 pr-10 text-base font-medium border-2 border-gray-300 rounded-xl bg-white focus:border-amber-500 focus:outline-none focus:ring-4 focus:ring-amber-500/20 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 appearance-none cursor-pointer hover:border-amber-400 transition-all",onChange:j,disabled:l,"aria-label":"Select first poll option",children:a&&a.map((t,r)=>e.jsx("option",{"data-imgurl":t.bakeURL,value:t.text,children:t.text},r))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-gray-100 hover:border-amber-300 transition-all hover:shadow-xl",children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-100 to-amber-50 p-6 border-b border-amber-200",children:e.jsxs("label",{htmlFor:"optionTwoNew",className:"flex items-center justify-center gap-2 text-xl font-bold text-gray-900",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¥ˆ"}),"Option Two"]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative aspect-square mb-6 bg-gray-50 rounded-xl overflow-hidden group",children:[e.jsx("img",{className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",src:v,alt:`${c}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{name:"optionTwoNew",id:"optionTwoNew",className:"w-full p-4 pr-10 text-base font-medium border-2 border-gray-300 rounded-xl bg-white focus:border-amber-500 focus:outline-none focus:ring-4 focus:ring-amber-500/20 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 appearance-none cursor-pointer hover:border-amber-400 transition-all",onChange:j,disabled:l,"aria-label":"Select second poll option",children:a&&a.map((t,r)=>e.jsx("option",{"data-imgurl":t.bakeURL,value:t.text,children:t.text},r))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4 mt-8",children:[e.jsxs("button",{className:"relative group w-full max-w-md py-4 px-8 border-none bg-gradient-to-r from-amber-600 via-amber-500 to-amber-600 hover:from-amber-700 hover:via-amber-600 hover:to-amber-700 disabled:from-gray-300 disabled:via-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed text-white font-bold text-lg rounded-xl shadow-lg hover:shadow-xl transition-all cursor-pointer focus:outline-none focus:ring-4 focus:ring-amber-500 focus:ring-offset-2 active:scale-95 disabled:active:scale-100 overflow-hidden",type:"submit",disabled:n===""||c===""||l,"aria-label":"Create poll",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-700 to-amber-900 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-3",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Poll..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Poll"]})})]}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Your poll will be visible to all users immediately after creation"})]})]})})]})};export{Y as default};
//# sourceMappingURL=NewPoll-dPrpSXXQ.js.map
